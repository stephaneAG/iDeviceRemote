/* Espruino Apple Dock module v0.1a by StephaneAG */
/*
Apple Dock

```
require("AppleDock").connect(TxPin, function() {
  // module is initialized
}/*, RxPin*/); // pass an Rx pin as well if we ish to receive
```  

*/

// R: the original Arduino code is available in the current repo as:
// -  AppleDock_original.ino     -> contains everything :)
// - AppleDock_originalLight.ino -> no mode 4 support :/

// iDevices codes setup
// 0      | 1      | 2      | 3    | 4       | 5       | 6     | 7
// header | header | length | mode | command | command | param | checksum
// 0xff   | 0x55   | 0-255  | 0-5  | -minimum 2 bytes- |       | 0x100-((L+M+P)&0xff) 

var AppleDock = {
  codes: {
    // mode switching
    switchMode2: ["0x00","0x01","0x02"],
    getMode:     ["0x00", "0x01", "0x03"],
    switchMode4: ["0x00","0x01","0x04"],
    changeMode:  ["0x00","0x01","0x00"],
    // mode 2
    buttonRelease:    ["0x04","0x02","0x00","0x00"],
    playPause:        ["0x04","0x02,"0x00","0x01"],
    volumeUp:         ["0x04","0x02","0x00","0x02"],
    volumeDown:       ["0x04","0x02","0x00","0x04"],
    skipForward:      ["0x04","0x02","0x00,"0x08"],
    skipBackward:     ["0x04","0x02","0x00","0x10"],
    nextAlbum:        ["0x04","0x02","0x00","0x20"],
    previousAlbum:    ["0x04","0x02","0x00","0x40"],
    stop:             ["0x04","0x02","0x00","0x80"],
    play:             ["0x05","0x02","0x00","0x00","0x01"],
    pause:            ["0x05","0x02","0x00","0x00","0x02"],
    toggleMute:       ["0x05","0x02","0x00","0x00","0x04"],
    nextPlaylist:     ["0x05","0x02","0x00","0x00","0x20"],
    previousPlaylist: ["0x05","0x02","0x00","0x00",0x40"],
    toggleShuffle:    ["0x05","0x02","0x00","0x00","0x80"],
    toggleRepeat:     ["0x06","0x02","0x00","0x00","0x00","0x01"],
    deviceOff:        ["0x06","0x02","0x00","0x00","0x00","0x04"],
    deviceOn:         ["0x06","0x02","0x00","0x00","0x00","0x08"],
    menuButton:       ["0x06","0x02","0x00","0x00","0x00","0x40"],
    centerButton:     ["0x06","0x02","0x00","0x00","0x00","0x80"],
    scrollCCW:        ["0x07","0x02","0x00","0x00","0x00","0x00","0x01"],
    scrollCW:         ["0x07","0x02","0x00","0x00","0x00","0x00","0x02"],
    // mode 4
    rxFeedback:       ["0x04","0x00","0x01"]
    txGetPodType:     ["0x04","0x00","0x12"],
    rxGetPodType:     ["0x04","0x00","0x13"],
    txGetPodName:     ["0x04","0x00","0x14"],
    rxGetPodName:     ["0x04","0x00","0x15"],
    txGoToLib:        ["0x04","0x00","0x16"],
    txSwitchItem:     ["0x04","0x00","0x17"],
    txGetCountType:   ["0x04","0x00","0x18"],
    rxGetCountType:   ["0x04","0x00","0x19"],
    txGetNamesRange:  ["0x04","0x00","0x1a"],
    rxGetNamesRange:  ["0x04","0x00","0x1b"],
    txGetTimeStatus:  ["0x04","0x00","0x1c"],
    rxGetTimeStatus:  ["0x04","0x00","0x1d"],
    txGetPosPl:       ["0x04","0x00","0x1e"],
    rxGetPosPl:       ["0x04","0x00","0x1f"],
    txGetTitleSong:   ["0x04","0x00","0x20"],
    rxGetTitleSong:   ["0x04","0x00,"0x21"],
    txGetArtistSong:  ["0x04","0x00","0x22"],
    rxGetArtistSong:  ["0x04","0x00","0x23"],
    txGetAlbumSong:   ["0x04","0x00","0x24"],
    rxGetAlbumSong:   ["0x04","0x00","0x25"],
    txPollingMode:    ["0x04","0x00","0x26"],
    rxPollingMode:    ["0x04","0x00","0x27"],
    txStartPlSong:    ["0x04","0x00","0x28"],
    txPlayBack:       ["0x04","0x00","0x29"],
    txGetShufMode:    ["0x04","0x00","0x2c"],
    rxGetShufMode:    ["0x04","0x00","0x2d"],
    txSetShufMode:    ["0x04","0x00","0x2e"],
    txGetRepMode:     ["0x04","0x00","0x2f"],
    rxGetRepMode:     ["0x04","0x00","0x30"],
    txSetRepMode:     ["0x04","0x00","0x31"],
    txUploadPic:      ["0x04","0x00","0x32"],
    txGetMaxScreen:   ["0x04","0x00","0x33"],
    rxGetMaxScreen:   ["0x04","0x00","0x34"],
    txGetNumSongPl:   ["0x04","0x00","0x35"],
    rxGetNumSongPl:   ["0x04","0x00","0x36"],
    txJumpSongPl:     ["0x04","0x00","0x37"]
  },
  sendCode: function(code, callback){
    // send the code to the iDevice
  },
  getChecksum: function(){
    // get & return the checksum
  }
};

exports.connect = function(TxPin, callback, RxPin) {
  // init the necessary pins
};
